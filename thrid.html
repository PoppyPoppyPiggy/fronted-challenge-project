<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TO-DO List</title>
    <link rel="stylesheet" href="third.css" />
  </head>
  <body>
    <div class="outline">
      <div class="content">
        <h1>TO-DO LIST</h1>
        <div class="first">
          <button class="all">전체</button>
          <button class="complete">완료</button>
          <button class="uncomplete">미완료</button>
        </div>

        <div class="second">
          <h4>할 일을 작성해주세요.</h4>
          <input type="text" id="todoInput" placeholder="할 일을 입력하세요" />
          <div id="priorityButtons">
            <button class="priorityBtn" value="낮음">낮음</button>
            <button class="priorityBtn" value="보통">보통</button>
            <button class="priorityBtn" value="높음">높음</button>
            <button class="priorityBtn" value="아주 높음">아주 높음</button>
          </div>
          <button onclick="addTodo()">추가</button>
        </div>
        <hr />
        <div class="third" id="todoList"></div>
      </div>
    </div>

    <script>
      // 각 우선순위 버튼에 대한 이벤트 리스너 추가
      const priorityButtons = document.querySelectorAll(".priorityBtn");
      priorityButtons.forEach((button) => {
        button.addEventListener("click", function () {
          // 선택된 버튼 스타일 변경
          priorityButtons.forEach((btn) => {
            btn.classList.remove("selected");
          });
          this.classList.add("selected");
        });
      });

      function addTodo() {
        const todoInput = document.getElementById("todoInput");
        const selectedPriority = document.querySelector(
          ".priorityBtn.selected"
        );

        if (todoInput.value === "") {
          alert("할 일을 입력하세요.");
          return;
        }

        if (!selectedPriority) {
          alert("우선순위를 선택하세요.");
          return;
        }

        const priority = selectedPriority.value;

        const todoItem = document.createElement("div");
        todoItem.classList.add("todo");

        const checkbox = document.createElement("input");
        checkbox.type = "checkbox";
        checkbox.addEventListener("change", function () {
          if (this.checked) {
            todoText.style.textDecoration = "line-through";
          } else {
            todoText.style.textDecoration = "none";
          }
        });

        const todoText = document.createElement("h4");
        todoText.textContent = `${todoInput.value} (우선순위: ${priority})`;

        const editButton = document.createElement("button");
        editButton.textContent = "수정";
        editButton.addEventListener("click", function () {
          const newText = prompt("새로운 내용을 입력하세요.");
          if (newText !== null) {
            todoText.textContent = `${newText} (우선순위: ${priority})`;
          }
        });

        todoItem.appendChild(checkbox);
        todoItem.appendChild(todoText);
        todoItem.appendChild(editButton);

        document.getElementById("todoList").appendChild(todoItem);

        todoInput.value = "";
        // 선택된 우선순위 버튼 해제
        priorityButtons.forEach((btn) => {
          btn.classList.remove("selected");
        });
      }
    </script>
  </body>
</html>
